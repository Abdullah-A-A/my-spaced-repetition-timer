<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ‚ Ø­Ø§Ø³Ø¨Ø© ÙˆÙ‚Øª Ø§Ù„Ø­ÙØ¸</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Readex+Pro&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: "Readex Pro", sans-serif;
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
      min-height: 100vh;
    }
    h1 {
      color: #663300;
    }
    input[type="number"] {
      padding: 10px;
      font-size: 18px;
      margin: 10px;
      width: 200px;
      text-align: center;
      border: 2px solid #cc6600;
      border-radius: 8px;
      background-color: #fff7f0;
      font-family: 'Readex Pro', sans-serif;
    }
    .buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 15px;
      flex-wrap: wrap;
    }
    button {
    font-family: 'Readex Pro', sans-serif;
      padding: 10px 20px;
      font-size: 18px;
      background-color: #cc6600;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 6px;
      transition: background-color 0.3s;
      min-width: 110px;
    }
    button:hover {
      background-color: #994d00;
    }
    .result,
    .timer {
      margin-top: 20px;
      font-size: 20px;
      color: #4d2600;
      white-space: pre-line;
      text-align: center;
      min-height: 60px;
      user-select: none;
    }
  </style>
</head>
<body>
  <h1>ğŸ‚ Ø­Ø§Ø³Ø¨Ø© ÙˆÙ‚Øª Ø§Ù„Ø­ÙØ¸</h1>
  <p>Ø£Ø¯Ø®Ù„ Ø¹Ø¯Ø¯ ØµÙØ­Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø©:</p>
  <input type="number" id="pages" min="1" placeholder="Ù…Ø«Ù„Ø§Ù‹: 14" />
  <p>Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ­Ø© Ø±Ù‚Ù…:</p>
  <input type="number" id="startPage" min="1" placeholder="Ù…Ø«Ù„Ø§Ù‹: 1" />
  <div class="buttons">
    <button id="calcBtn" onclick="calculateTime()">â³ Ø§Ø­Ø³Ø¨</button>
    <button id="startBtn" onclick="startTimer()">â–¶ï¸ Ø§Ø¨Ø¯Ø£</button>
    <button id="pauseBtn" onclick="pauseTimer()" disabled>â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</button>
    <button id="stopBtn" onclick="stopTimer()" disabled>â¹ï¸ Ø£ÙˆÙ‚Ù Ù†Ù‡Ø§Ø¦ÙŠ</button>
  </div>

  <div class="result" id="result"></div>
  <div class="timer" id="timerDisplay"></div>

  <script>
    let timer = null;
    let currentPage = 1;
    let totalPages = 0;
    let mode = "Ø­ÙØ¸";
    let totalSeconds = 0;
    let remainingSeconds = 0;
    let isPaused = false;

    function calculateTime() {
      const n = parseInt(document.getElementById("pages").value);
      let totalMinutes = 0;

      if (isNaN(n) || n <= 0) {
        document.getElementById("result").textContent =
          "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ø¯Ø¯ ØµØ­ÙŠØ­ Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±";
        return;
      }

      if (n <= 5) {
        totalMinutes = (n * (n + 1)) / 2 + 5 * n;
      } else {
        totalMinutes = 40 + (n - 5) * 10;
      }

      const hours = Math.floor(totalMinutes / 60);
      const minutes = totalMinutes % 60;
      const timeStr =
        hours > 0 ? `${hours} Ø³Ø§Ø¹Ø© Ùˆ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©` : `${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;

      document.getElementById(
        "result"
      ).textContent = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù„Ø­ÙØ¸ Ø§Ù„Ø³ÙˆØ±Ø©: ${timeStr}`;
    }

    function startTimer() {
      if (timer && isPaused) {
        // Ø§Ø³ØªØ¦Ù†Ø§Ù Ø¨Ø¹Ø¯ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª
        isPaused = false;
        startInterval();
        updatePauseButton();
        return;
      }

      totalPages = parseInt(document.getElementById("pages").value);
      currentPage = parseInt(document.getElementById("startPage").value);

      if (
        isNaN(totalPages) ||
        totalPages <= 0 ||
        isNaN(currentPage) ||
        currentPage <= 0 ||
        currentPage > totalPages
      ) {
        document.getElementById("timerDisplay").textContent =
          "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­";
        return;
      }

      mode = "Ø­ÙØ¸";
      remainingSeconds = 5 * 60;
      updatePauseButton(true);
      updateStopButton(true);
      runStep();
    }

    function runStep() {
      if (currentPage > totalPages) {
        document.getElementById("timerDisplay").textContent =
          "Ø§Ù†ØªÙ‡ÙŠØª Ù…Ù† Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ğŸ‰";
        updatePauseButton(false);
        updateStopButton(false);
        clearInterval(timer);
        timer = null;
        return;
      }

      if (mode === "Ø­ÙØ¸") {
        remainingSeconds = 5 * 60;
        document.getElementById(
          "timerDisplay"
        ).textContent = `ğŸ“˜ Ø§Ù„ØµÙØ­Ø© ${currentPage} - Ø·ÙˆØ± Ø­ÙØ¸ (5 Ø¯Ù‚Ø§Ø¦Ù‚)\nâ³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 5:00`;
        startInterval();
      } else if (mode === "Ù…Ø±Ø§Ø¬Ø¹Ø©") {
        const reviewCount = Math.min(5, currentPage);
        remainingSeconds = reviewCount * 60;
        document.getElementById(
          "timerDisplay"
        ).textContent = `ğŸ“– Ø§Ù„ØµÙØ­Ø© ${currentPage} - Ø·ÙˆØ± Ù…Ø±Ø§Ø¬Ø¹Ø© (${reviewCount} Ø¯Ù‚Ø§Ø¦Ù‚)\nâ³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${reviewCount}:00`;
        startInterval();
      }
    }

    function startInterval() {
      if (timer) clearInterval(timer);
      timer = setInterval(() => {
        if (!isPaused) {
          if (remainingSeconds <= 0) {
            if (mode === "Ø­ÙØ¸") {
              mode = "Ù…Ø±Ø§Ø¬Ø¹Ø©";
              runStep();
            } else if (mode === "Ù…Ø±Ø§Ø¬Ø¹Ø©") {
              currentPage++;
              mode = "Ø­ÙØ¸";
              runStep();
            }
          } else {
            remainingSeconds--;
            updateTimerDisplay(remainingSeconds);
          }
        }
      }, 1000);
    }

    function pauseTimer() {
      if (!timer) return;
      isPaused = !isPaused;
      updatePauseButton();
      if (!isPaused) {
        // Ø§Ø³ØªØ¦Ù†Ø§Ù
        updateTimerDisplay(remainingSeconds);
      } else {
        document.getElementById("timerDisplay").textContent +=
          "\nâ¸ï¸ ØªÙ… Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª";
      }
    }

    function stopTimer() {
      if (timer) clearInterval(timer);
      timer = null;
      isPaused = false;
      currentPage = 1;
      mode = "Ø­ÙØ¸";
      remainingSeconds = 0;
      updatePauseButton(false);
      updateStopButton(false);
      document.getElementById("timerDisplay").textContent =
        "ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§.";
    }

    function updatePauseButton(enabled = null) {
      const pauseBtn = document.getElementById("pauseBtn");
      if (enabled === false) {
        pauseBtn.disabled = true;
        pauseBtn.textContent = "â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª";
      } else if (enabled === true) {
        pauseBtn.disabled = false;
        pauseBtn.textContent = "â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª";
      } else {
        if (isPaused) {
          pauseBtn.textContent = "â–¶ï¸ Ø§Ø³ØªØ¦Ù†Ø§Ù";
        } else {
          pauseBtn.textContent = "â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª";
        }
      }
    }

    function updateStopButton(enabled = null) {
      const stopBtn = document.getElementById("stopBtn");
      if (enabled === false) {
        stopBtn.disabled = true;
      } else if (enabled === true) {
        stopBtn.disabled = false;
      }
    }

    function updateTimerDisplay(seconds) {
      const minutes = Math.floor(seconds / 60);
      const secs = seconds % 60;
      const baseText =
        mode === "Ø­ÙØ¸"
          ? `ğŸ“˜ Ø§Ù„ØµÙØ­Ø© ${currentPage} - Ø·ÙˆØ± Ø­ÙØ¸ (5 Ø¯Ù‚Ø§Ø¦Ù‚)`
          : `ğŸ“– Ø§Ù„ØµÙØ­Ø© ${currentPage} - Ø·ÙˆØ± Ù…Ø±Ø§Ø¬Ø¹Ø© (${Math.min(5, currentPage)} Ø¯Ù‚Ø§Ø¦Ù‚)`;

      document.getElementById(
        "timerDisplay"
      ).textContent = `${baseText}\nâ³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${minutes}:${secs
        .toString()
        .padStart(2, "0")}`;
    }
  </script>
</body>
</html>
